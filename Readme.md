# MLS Artifact Sizing Experiment

This tool measures the size of various MLS (Messaging Layer Security) artifacts generated by the `OpenMLS` library. It is designed to analyse the impact of using Post-Quantum Cryptography (PQC) signature schemes on artifact sizes compared to classical schemes like Ed25519.

The experiment systematically iterates through a predefined set of ciphersuites, including both classical and PQC options, and performs several key MLS operations for various group sizes to collect data on artifact sizes.

## Experiments Performed

The following operations are measured:

- **Key Package Generation**: Measures the size of a standalone `KeyPackage`.
- **Add Member**: Measures the size of the `Commit` and `Welcome` messages when a new member is added to a group.
- **Self-Update**: Measures the size of a `Commit` message for a member updating their own leaf node.
- **Remove Member**: Measures the size of a `Commit` message when a member is removed from the group.

The impact of the `ratchet_tree_extension` on the `Add Member` operation is also measured.

## Prerequisites

- Rust and Cargo toolchain.

## Usage

The experiment can be run from the command line using Cargo. It is recommended to run in release mode for better performance.

```sh
cargo run --release -- [OPTIONS]
```

### Command-Line Arguments

- `-o, --output-file <FILE>`: Specifies the path for the output CSV file.
  - **Default**: `mls_object_size_scaling.csv`
- `--group-sizes <SIZES>`: A comma-separated list of group sizes to measure.
  - **Default**: `2,10,50,100,250,500,1000`

### Example

```sh
cargo run --release -- --output-file results.csv --group-sizes 10,100,1000
```

## Output Format

The results are written to a CSV file with the following columns:

| Column                           | Description                                                                             |
| -------------------------------- | --------------------------------------------------------------------------------------- |
| `operation`                      | The MLS operation performed (`add`, `remove`, `self_update`, `key_package_generation`). |
| `group_size`                     | The number of members in the group for the given operation.                             |
| `commit_message_size_bytes`      | The size of the generated `Commit` message in bytes.                                    |
| `welcome_message_size_bytes`     | The size of the generated `Welcome` message in bytes (for `add` operations).            |
| `key_package_size_bytes`         | The size of the generated `KeyPackage` in bytes.                                        |
| `ratchet_tree_extension_enabled` | `true` or `false`, indicating if the ratchet tree extension was used.                   |
| `ciphersuite`                    | The signature algorithm of the ciphersuite used for the measurement.                    |

This data can be used for further analysis and visualization to compare the performance and overhead of different cryptographic schemes within MLS.
